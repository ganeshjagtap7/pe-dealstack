<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Coming Soon - PE OS</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg"/>
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        "primary": "#003366",
                        "primary-hover": "#002855",
                        "primary-light": "#E6EEF5",
                        "secondary": "#059669",
                        "secondary-light": "#D1FAE5",
                        "background-body": "#F8F9FA",
                        "surface-card": "#FFFFFF",
                        "border-subtle": "#E5E7EB",
                        "border-focus": "#CBD5E1",
                        "text-main": "#111827",
                        "text-secondary": "#4B5563",
                        "text-muted": "#9CA3AF",
                    },
                    fontFamily: {
                        "sans": ["Inter", "sans-serif"],
                        "display": ["Inter", "sans-serif"],
                    },
                    boxShadow: {
                        "card": "0 1px 3px 0 rgba(0, 0, 0, 0.05), 0 1px 2px -1px rgba(0, 0, 0, 0.05)",
                        "card-hover": "0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -4px rgba(0, 0, 0, 0.05)",
                    },
                },
            },
        }
    </script>
</head>
<body class="font-sans bg-background-body text-text-main min-h-screen">

<!-- Loading Screen -->
<div id="loadingScreen" class="fixed inset-0 bg-background-body flex items-center justify-center z-50">
    <div class="flex flex-col items-center gap-3">
        <div class="w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"></div>
        <span class="text-sm text-text-muted">Loading...</span>
    </div>
</div>

<!-- Layout Container -->
<div id="pe-layout-root" class="flex min-h-screen opacity-0 transition-opacity duration-300">
    <!-- Sidebar will be injected here -->
    <div id="pe-sidebar"></div>

    <!-- Main Content -->
    <div class="flex-1 flex flex-col min-h-screen">
        <!-- Header will be injected here -->
        <div id="pe-header"></div>

        <!-- Page Content -->
        <main class="flex-1 flex items-center justify-center p-8">
            <div class="text-center max-w-md">
                <!-- Icon -->
                <div class="w-20 h-20 mx-auto mb-6 rounded-2xl bg-primary-light flex items-center justify-center">
                    <span id="feature-icon" class="material-symbols-outlined text-primary text-4xl">construction</span>
                </div>

                <!-- Title -->
                <h1 id="feature-title" class="text-2xl font-bold text-text-main mb-2">Coming Soon!</h1>

                <!-- Description -->
                <p id="feature-description" class="text-text-secondary mb-8">
                    We're working hard to bring you this feature. Stay tuned for updates!
                </p>

                <!-- Feature Badge -->
                <div class="inline-flex items-center gap-2 px-4 py-2 bg-primary-light text-primary rounded-full text-sm font-medium mb-8">
                    <span class="material-symbols-outlined text-[18px]">schedule</span>
                    <span>In Development</span>
                </div>

                <!-- Back Button -->
                <div>
                    <a href="/dashboard.html" class="inline-flex items-center gap-2 px-6 py-3 bg-primary text-white rounded-lg font-medium hover:bg-primary-hover transition-colors">
                        <span class="material-symbols-outlined text-[20px]">arrow_back</span>
                        Back to Dashboard
                    </a>
                </div>
            </div>
        </main>
    </div>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
<script src="js/auth.js"></script>
<script src="js/layout.js"></script>
<script>
    // Feature configurations
    const features = {
        crm: {
            title: 'CRM',
            icon: 'groups',
            description: 'Contact & Relationship Management - Track your network of bankers, advisors, and executives.'
        },
        portfolio: {
            title: 'Portfolio',
            icon: 'pie_chart',
            description: 'Portfolio Management - Monitor your investments, track KPIs, and manage value creation.'
        }
    };

    document.addEventListener('DOMContentLoaded', async () => {
        // Initialize Supabase first
        await PEAuth.initSupabase();

        // Check auth - redirect to dashboard (not back here) if not authenticated
        const auth = await PEAuth.checkAuth('/dashboard.html');
        if (!auth) return;

        // Get feature from URL param
        const urlParams = new URLSearchParams(window.location.search);
        const feature = urlParams.get('feature') || 'default';

        // Update page content based on feature
        const config = features[feature];
        if (config) {
            document.getElementById('feature-title').textContent = config.title + ' - Coming Soon!';
            document.getElementById('feature-icon').textContent = config.icon;
            document.getElementById('feature-description').textContent = config.description;
            document.title = config.title + ' - Coming Soon - PE OS';
        }

        // Initialize layout with the feature as active nav item
        PELayout.init(feature, { collapsible: true });

        // Hide loading, show content
        document.getElementById('loadingScreen').style.display = 'none';
        document.getElementById('pe-layout-root').style.opacity = '1';
    });
</script>
</body>
</html>
